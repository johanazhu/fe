# 用Node自定义脚手架







查看大公司脚手架怎么做的？例如 [umi](https://umijs.org/zh-CN/docs/getting-started)

- `yarn create @umijs/umi-app`：创建一个 umi 项目
- yarn：安装依赖
- yarn start：启动项目
- yarn build：构建



所以我们的脚手架核心命令主要是：

| 命令   | 说明                    |
| ------ | ----------------------- |
| create | 通过[模板]创建一个项目  |
| start  | 启动 devServer 进行调试 |
| build  | 通过 webpack 构建项目   |





先下载 azhu-cli 安装一个[模板插件包]，再选择一个 模板 来初始化一个工程



我们要使用 node 来创建一个自己的 脚手架 工具，暂时起名为 azhu-cli



这里需要知道一些 shell 命令，如果你不懂也没关系



我们希望做成什么样

gif动态图







## 创建工程



```shell
mkdir azhu=cli
cd azhu-cli
npm init -y
```



## 需要安装的 npm 包

我们先列个表格，查看一下各个 npm 包是什么，有什么用，后续在写代码时一步步添加进去

| 包名称                                               | 重要性   | 说明                                                |
| ---------------------------------------------------- | -------- | --------------------------------------------------- |
| [commander](https://www.npmjs.com/package/commander) | 必要     | 命令行解决方案                                      |
| [inquirer](https://www.npmjs.com/package/inquirer)   | 必要     | 问答交互                                            |
| [chalk](https://www.npmjs.com/package/chalk)         | 必要     | 让你 console.log 出来的字带颜色，比如成功时的绿色字 |
|                                                      |          |                                                     |
|                                                      |          |                                                     |
| [figlet](https://www.npmjs.com/package/figlet)       | 锦上添花 | console.log出一个漂亮的大logo                       |
|                                                      |          |                                                     |
|                                                      |          |                                                     |
|                                                      |          |                                                     |
|                                                      |          |                                                     |
|                                                      |          |                                                     |
| [open](https://www.npmjs.com/package/open)           | 锦上添花 | 跨平台打开 app，比如调试的时候开打 chrome           |









## 定制命令行界面

使用 commander





## 打印欢迎界面

/lib/init.js



## 克隆脚手架

/lib/download.js



## 安装依赖



## 启动项目



## 约定路由功能





## 发布 npm







## 参考资料

[搭建一个企业级脚手架](https://github.com/imaoda/js-front-end-practice/blob/master/%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%84%9A%E6%89%8B%E6%9E%B6.md)

[从零开发一个node命令行工具](https://mp.weixin.qq.com/s/CO6La0NCHnsfXN4MHgiBag)