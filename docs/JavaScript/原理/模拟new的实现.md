# 模拟new的实现



像sorrycc那样先提出疑问，再解决



new是什么？

由什么构成？

它的作用是什么？

原生的语法是怎么样，手动写一个该怎么写？





手写new的时候为什么要判断是否return

因为构造函数本身就是一个函数，即使我们约定 构造函数首字母大写，但还是要对其内部进行判断











javascript高级程序设计第四版对new调用构造函数会执行的操作描述：

（1）在内存中创建一个新对象

（2）这个新对象内部的[[prototype]]特性被赋值为构造函数的 prototype 属性

（3）构造函数内部的 this 被赋值为这个新对象（即this指向新对象）

（4）执行构造函数内部的代码（给新对象添加属性）

（5）如果构造函数返回非空对象，则返回该对象；否则，返回刚创建的新对象



阮一峰：

使用`new`命令时，它后面的函数依次执行下面的步骤。

1. 创建一个空对象，作为将要返回的对象实例。
2. 将这个空对象的原型，指向构造函数的`prototype`属性。
3. 将这个空对象赋值给函数内部的`this`关键字。
4. 开始执行构造函数内部的代码