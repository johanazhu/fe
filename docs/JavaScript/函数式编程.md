# 函数式编程



要想看懂一些牛逼的源码

必须掌握的编程思维就是 函数式编程

```javascript
const compose = (f, g) => x => f(g(x))

const f = x => x + 1;
const g = x => x * 2'
const fg = compose(f, g)
fg(1)
```





https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651233708&idx=1&sn=5f65bf6cc7e012ce99e648e8c4b56a89&chksm=bd4944288a3ecd3eed9fa153b2eaa7e1716393a96e307228920d5c638816b437f96d80eede63&scene=21#wechat_redirect



### 纯函数的好处

纯函数的概念

> 纯函数是这样一种函数，即相同的输入，永远会得到相同的输出，而且没有任何可观察的副作用



副作用的概念

> 副作用是在计算结果的过程中，系统状态的一种变化，或者与外部世界进行的可观察的交互



副作用可能包括，但不限于：

- 更改文件系统
- 往数据库插入记录
- 发送一个 http 请求
- 可变数据
- 打印log
- 获取用户输入
- DOM 查询



### 追求“纯”的理由

#### 可缓存性（Cacheable）



#### 可测试性（Testable）



#### 合理性（Reasonabel）





## 柯里化（Curry）

curry的概念

> 只传递给函数一部分参数来调用它，让它返回一个函数去处理剩下的参数





#### 偏函数的简单应用

Function.prototype.bind()

会创建一个新函数（称为绑定函数），新函数与被调函数（绑定函数的目标函数）具有相同的函数体







https://github.com/sunyongjian/FP-Code/tree/master/src





### 概念

函数式编程倡导**利用若干简单的执行单元**让计算结果不断渐进，逐层推导复杂的运算
=======
https://juejin.cn/post/6940442700889980965



函数式编程有两个最基本的运算： 合成（compose）和柯里化（Currying）



### 合成（Compose）

### 柯里化（Currying）

概念：把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术

所谓“柯里化”，就是把一个多参数的函数，转化为单参数函数

```javascript
// 柯里化之前
function add(x, y) {
    return x + y
}

add(1, 2) // 3

// 柯里化之后
function addX(y) {
    return function (x) {
        return x + y
    }
}

addX(2)(1)
```

这样调用上述函数： `(foo(3))(4)` 或直接 `foo(3)(4)`





### 多个箭头函数是什么意义

```javascript
const addSumArrow = (a) => (b) => a+b
// 等于
const addSumNormal = function (a) {
    return function(b) {
        return a + b
    }
}
```



```javascript
function enhancer(originF) {
    return function(...args) {
        console.log('before')
        const result =  originF(...args)
        console.log('after')
        return result;
    }
}
// 等于
const enhancer = (originF) => (...args) => {
    console.log('before')
    const result =  originF(...args)
    console.log('after')
    return result;
}

```







两数之加

```javascript
add = (a, b) => a + b 
c_add = (a) => (b) => a+b
```



三数之乘

```javascript
multi = (a, b, c) => a * b * c
c_multi = a => b => c => a * b * c
```



单参定理

**「多参数函数」一定能改写为「单参数函数」，且其输入输出保持不变**。



「赋值」会导致数据共享变得麻烦，你无法信任别人不改你的数据，别人也无法信任你：

- 要么就靠大家自觉，约定大家都不改 options（我只能说祝你好运）；
- 要么传给别人之前先深拷贝一下，拿到别人的数据之后最好也先深拷贝一下……



数据不可变的两个有点：

- 数据可变将导致[代入法]不可用，函数与数学再无关联；而数据不可变则相反
- 数据可变将导致数据共享变得困难；而数据不可变则相反



函数式编程无副作用是因为它不会修改自己外部的 env，也不会去修改通过参数传进来的对象，顶多修改自己的本地变量而已



