# 数组扁平化、去重、排序



已知如下数组：var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];

编写一个程序将数组扁平化去并除其中重复部分数据，最终得到一个升序且不重复的数组



```javascript
var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10]

// 扁平化
let flatArr = arr.flat(Infinity)
// 去重
let disArr = Array.from(new Set(flatArr))
// 排序
let result = disArr.sort(function(a, b) {
    return a-b
})
console.log(result)
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
// Array.from 将类数组转成数组实例
```





### 数组去重

#### ES5

```javascript
function unique(arr) {
    var res = arr.filter((item, index, array) => {
        return array.indexOf(item) === index
    })
    return res
}
```

#### ES6

```javascript
function unique(arr) {
    return [...new Set(arr)]
}
```



### 数组扁平化

使用 Array.prototype.flat 就可以将多层数组拍平一层

```javascript
[1, [2, [3]]].flat(Infinity) // [1, 2, 3]
```



#### ES5：递归

```javascript
function flatten(arr) {
    var result = [];
    for (var i = 0, len = arr.length; i < len; i++) {
        if (Array.isArray(arr[i])) {
            result = result.concat(flatten(arr[i]))
        } else {
            result.push(arr[i])
        }
    }
    return result;
}
```

#### ES6

```javascript
function flatten(arr) {
    while(arr.some(item => Array.isArray(item))) {
        arr = [].concat(...arr)
    }
    return arr;
}
```

