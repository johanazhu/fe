# React 生命周期管理



## 前言

生命周期已经很久没有考过了

但是在我刚接触 React 的时候，这是个必学的知识点



相对应的 Vue ，小程序也有生命周期



你是否遇到过这样的问题：

- 组件的生命周期有哪些？为什么要有生命周期函数？
- 我应该生命时候去获取后台数据？为什么很多教程都推荐用componentDidMount？用componentWillMount有什么问题？
- 为什么 setState 卸载这里造成了重复渲染多次？
- setState在这里写合适吗

  

https://www.yuque.com/fe9/select/fon761



组件是有周期

componentWillMount 当要挂载

componentDidMount 挂载上时

componentWillUnmount 摧毁时

componentWillReceiveProps 当传来的props变化时

shouldComponentUpdate 返回boolean 

componentWillUpdate 当组件要更新前

componentDidUpdate 当组件更新完







生命周期图谱

https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/



现在生命周期都没人考了，为什么？大家都用 函数式组件来写，状态的话由hook来管理

为什么？写起来简单，不用写不必要的生命周期







组件渲染：

constructor-componentWillMount-render-componentDidMount

组件卸载：

componentDidUnmount

调用this.setState

shouldComponentUpdate-componentWillUpdate-render-componentDidUpdate

props变化

componentWillReceiveProps-shouldComponentUpdate-componentWillUpdate-render-componentDidUpdate(比调用this.setState多了componentWillReceiveProps)





![image-20210429143319567](https://i.loli.net/2021/06/03/ZpyL2VFdatu7rc1.png)





我对 React v16.4 生命周期的理解

https://juejin.cn/post/6844903655372488712



生命周期

https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/







这些场景，我们同样需要在React Hook中予以解决。React为`Class component`设计了一大堆生命周期函数：

- 在实际的项目开发中用的比较频繁的，譬如渲染后期的：`componentDidMount`、`componentDidUpdate`、`componentWillUnmount`；
- 很少被使用的渲染前期钩子`componentWillMount`、`componentWillUpdate`；
- 一直以来被滥用且有争议的`componentWillReceiveProps`和最新的`getDerivedStateFromProps`；
- 用于性能优化的`shouldComponentUpdate`；

React 16.3版本已经明确了将在17版本中废弃`componentWillMount`、`componentWillUpdate`和`componentWillReceiveProps`这三个生命周期函数。设计用来取代`componentWillReceiveProps`的`getDerivedStateFromProps`也并不被推荐使用