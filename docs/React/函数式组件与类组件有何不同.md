# 函数式组件与类组件有何不同？

## 前言

React 中最关键的知识点就是 组件，在 React 16.8 之前（还没有 Hooks 前），我们的应用大多写成 Class 组件，因为 Class 组件有生命周期，能控制状态（state）。但函数式组件只能默默站在后面，说自己是木偶组件（也叫无状态组件），传来 props，显示UI

以下文字都基于有了 Hooks 后

## 正文

函数式组件和类组件之间是否有什么根本上的区别？

**函数式组件捕获渲染时的值**

具体可以看这篇文章：[函数式组件与类组件有何不同？](https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/)

函数式组件会捕获当前状态下的值，如果你使用定时器改变当前值的状态，那函数式组件显示的还是原来的值，而不是最新值

而类组件会一直获取最新值



在 React 中 props 式不可变（immutable）的，所以它们永远不会改变。然而，this 是，而且永远是，可变（mutable）的

事实上，这就是类组件 this 存在的意义。React 本身会随着时间的推移而改变，以便你可以在渲染方法以及生命周期方法中得到最新的实例





在构造函数中绑定方法

```react
  constructor(props) {
    super(props);
    this.showMessage = this.showMessage.bind(this);
    this.handleClick = this.handleClick.bind(this);
  }
```



通过闭包解决问题

你在渲染的时候就已经“捕获”了props：





props 和 state 是数据不可变的



### 类组件的闭包陷阱



函数式组件如果想要保存最新的值呢

使用 useRef 保存最新的值





## 参考资料

[函数式组件与类组件有何不同？](https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/)