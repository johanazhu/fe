## ssr 增量开发 难点以及解决方案



什么是ssr

为什么要做ssr

ssr同构是什么？

难点在哪里？注水和脱水

如果用hook的话，有什么技术难点

为什么增量开发中加了后会有难度，

单页面和多页面应用的结合会有什么奇妙的化学反应

市场上有什么解决方案？

这位大哥的解决方案？

我的思考



我们现在公司出现的具体情况，

原本是Node 模板渲染，现在像用单页面应用React来解决问题



一句话解释：

同构：客户端和服务端渲染的一个整合，让代码执行两次（其实就一次，通过一些算法标识如果key一致就不在渲染）。这句话很奇怪，为什么key一致就不渲染了

react 所写的单页面应用，通过 react-dom/server 中的 renderToString 把 React 组件转换成 字符串片段A，用户访问浏览器路由A（路由扔给客户端），浏览器返回 字符串片段A，因为已经在服务端渲染过，所有浏览器（客户端）加载页面的时候只是渲染字符串而已，速度很快。







session和token

token我直接存在客户端里，去请求接口的时候，通过header 携带过去，因为加密过，别人无法篡改，到了服务器端，服务端端解析token，再做判断

1.用户登录校验，校验成功后返回 token 给客户端，

2.客户端收到token后保存至客户端（一般用localStorage保存）

3.客户端每次访问API时携带Token到服务器端

4.服务器端校验token，成功返回请求数据，失败返回错误码



Token的优势：

无状态、可扩展

在客户端存储的token是无状态的，并且能够被扩展。如果用session，负载均衡一弄你的用户信息从一个服务器到另一个服务器，你还需要在两个服务器中打个桥，如果服务器一多，你在服务器端做的时候就更多了。

而token本身就是无状态的，存储在客户端，一省了session 服务器，二少了很多运维的操作，可扩展性完爆session

安全性

请求中发送token 而不再是发送 cookie 能够防止 CSRF（跨站请求伪造）。即使在客户端使用cookie存储token，cookie 也仅仅是个存储机制而不是用于认证。不将信息存储在 Session 中，让我们少了对 session 操作

token 是有时效的，一段时间之后用户需要重新验证。我们



















