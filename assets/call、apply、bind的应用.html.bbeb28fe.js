import{_ as a,r as p,o as t,c as e,a as n,d as o,F as c,e as l,b as u}from"./app.873f0dc8.js";const i={},r=l(`<h1 id="call\u3001apply\u3001bind-\u7684\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#call\u3001apply\u3001bind-\u7684\u5E94\u7528" aria-hidden="true">#</a> call\u3001apply\u3001bind \u7684\u5E94\u7528</h1><p>\u4E4B\u524D\u5728\u8BB2 <a href="../this%E5%85%B3%E9%94%AE%E5%AD%97">this \u5173\u952E\u5B57</a> \u65F6\uFF0C\u6211\u4EEC\u4ECB\u7ECD\u8FC7\u8FD9\u4E09\u4E2A api\uFF0C\u6211\u4EEC\u5F97\u51FA\u8FD9\u6837\u7684\u7ED3\u8BBA\uFF1A<strong>call\u3001apply \u548C bind \u90FD\u62E5\u6709\u63B0\u5F2F this \u6307\u5411\u7684\u80FD\u529B</strong>\u3002</p><p>\u4ECB\u4E8E\u5F53\u65F6\u7684\u91CD\u70B9\u5728\u4E8E this\uFF0C\u5BF9\u8FD9\u4E09\u8005\u5E76\u6CA1\u6709\u8BE6\u7EC6\u4ECB\u7ECD\uFF0C\u8FD9\u4E00\u8282\uFF0C\u6211\u4EEC\u597D\u597D\u8BF4\u4E00\u8BF4\u8FD9\u4E09\u4E2A api\u3002</p><ul><li>call</li><li>apply</li><li>bind</li><li>\u5B9E\u9645\u5E94\u7528 <ul><li>\u7EE7\u627F xxx = Person.apply(this)</li></ul></li></ul><h3 id="call" tabindex="-1"><a class="header-anchor" href="#call" aria-hidden="true">#</a> Call</h3><blockquote><p>MDN\uFF1Acall() \u65B9\u6CD5\u4F7F\u7528\u4E00\u4E2A\u6307\u5B9A\u7684 this \u503C\u548C\u5355\u72EC\u7ED9\u51FA\u7684\u4E00\u4E2A\u6216\u591A\u4E2A\u53C2\u6570\u6765\u8C03\u7528\u4E00\u4E2A\u51FD\u6570</p></blockquote><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">myName</span><span class="token operator">:</span> <span class="token string">&#39;johan&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>myName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// johan</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u4E5F\u5C31\u662F\u8BF4\uFF1A\u8C03\u7528 foo \u51FD\u6570\u7684\u65F6\u5019\uFF0C\u8C03\u7528\u4F7F\u7528 call()\uFF0C\u5E76\u4E14\u4F20\u5165 bar\uFF0C\u4F7F\u5F97 foo \u51FD\u6570\u5185\u90E8\u7684 this \u6307\u5411\u4E86 bar</p><h4 id="\u5B9E\u73B0-call" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0-call" aria-hidden="true">#</a> \u5B9E\u73B0 call</h4><p>\u54B1\u4EEC\u6839\u636E\u8FD9\u4E2A\u7ED3\u8BBA\u6765\u5B9E\u73B0\u4E00\u4E0B call</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">johanCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context <span class="token operator">=</span> window<span class="token punctuation">,</span> <span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5224\u65AD\u662F\u51FD\u6570\u624D\u80FD\u8C03\u7528call\u65B9\u6CD5</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;\u7C7B\u578B\u9519\u8BEF&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u5C06this\u4E5F\u5C31\u662F\u88AB\u8C03\u7528\u7684\u51FD\u6570\uFF0C\u901A\u8FC7\u8D4B\u503C\u7ED9\u4F20\u5165\u7684\u5BF9\u8C61\uFF0C\u6765\u8FBE\u5230\u5C06\u88AB\u8C03\u7528\u7684\u51FD\u6570\u6DFB\u52A0\u5230\u4F20\u5165\u7684\u5BF9\u8C61\u4E0A\u7684\u76EE\u7684</span>
    context<span class="token punctuation">.</span>fun <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// \u7528\u4F20\u5165\u7684\u5BF9\u8C61\u6765\u8C03\u7528\u9700\u8981\u88AB\u8C03\u7528\u7684\u51FD\u6570\uFF0C\u5E76\u4FDD\u7559\u8FD4\u56DE\u7ED3\u679C</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token operator">...</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5220\u9664\u4F20\u5165\u5BF9\u8C61\u4E0A\u88AB\u6DFB\u52A0\u7684\u51FD\u6570\uFF0C\u9632\u6B62\u5185\u5B58\u6CC4\u6F0F</span>
    Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">&#39;fun&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8FD4\u56DE\u7ED3\u679C</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u5176\u6838\u5FC3\u5F88\u7B80\u5355\uFF0C\u5173\u952E\u5728\u4E00\u4E2A\u70B9\u4E0A\uFF0C\u5373 <code>context.fun = this</code> , \u600E\u4E48\u7406\u89E3\u8FD9\u53E5\u8BDD</p><p>\u6CE8\u610F\uFF0C\u6211\u4EEC\u4E4B\u524D\u8BB2 this \u7BC7\u7AE0\u7684\u65F6\u5019\uFF0C\u5C31\u8BB2\u8FC7 this \u4E98\u53E4\u4E0D\u53D8\u7684\u6307\u5411\u539F\u5219\u2014\u2014\u8C01\u8C03\u7528\u6211\uFF0C\u6211\u6307\u5411\u8C01\u3002</p><p>\u5728\u4F8B\u5B50\u4E2D\uFF0Cfoo.call(bar)\uFF0C\u5373 foo \u8C03\u7528\u4E86 call\uFF0Ccall \u65B9\u6CD5\u4E2D\u7684 this \u6307\u5411\u7684\u5C31\u662F foo \u51FD\u6570\uFF0C\u6240\u4EE5 this \u4EE3\u6307\u88AB\u8C03\u7528\u7684\u51FD\u6570</p><p>\u68B3\u7406\u4E00\u4E0B\uFF1A</p><ul><li>\u5C06\u88AB\u8C03\u7528\u7684\u51FD\u6570\u4F5C\u4E3A\u4E00\u4E2A\u5C5E\u6027\u6DFB\u52A0\u5230\u4F20\u5165\u7684\u5BF9\u8C61\u4E0A</li><li>\u4ECE\u800C\u53EF\u4EE5\u5B9E\u73B0\u5728\u4F20\u5165\u7684\u5BF9\u8C61\u4E0A\uFF0C\u8C03\u7528\u9700\u8981\u88AB\u8C03\u7528\u7684\u51FD\u6570</li><li>\u5176\u6838\u5FC3\u539F\u7406\u8FD8\u662F this \u7684\u6307\u5411\u539F\u7406\uFF1A<strong>\u8C01\u8C03\u7528\u6211\uFF0C\u6211\u6307\u5411\u8C01</strong></li></ul><p>\u5B9E\u73B0 call</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9996\u5148\u8981\u83B7\u53D6\u8C03\u7528call2\u7684\u51FD\u6570\uFF0C\u7528 this \u53EF\u4EE5\u83B7\u53D6</span>
    context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
bar<span class="token punctuation">.</span><span class="token function">call2</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u6700\u5F00\u59CB\uFF0C\u6211\u4EEC\u4F1A\u7591\u60D1\uFF0Ccontext.fn \u600E\u4E48\u6765\u7684\uFF0C\u4F46\u662F\u522B\u5FD8\u8BB0\u4E86\uFF0Cthis \u7684\u6307\u5411\u4E3A\u8C01\u8C03\u7528\u5B83\u5C31\u6307\u5411\u8C01\u3002</p><p>\u90A3\u4E48\u5728 <code>bar.call2(foo)</code> \u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u8C03\u7528 call2 \u51FD\u6570\u7684\u662F bar\uFF0C\u6240\u4EE5 call2 \u4E2D\u7684 this \u6307\u5411\u7684\u662F bar</p><p>context.fn \u7684\u610F\u601D\u662F</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u4F2A\u4EE3\u7801</span>
context<span class="token punctuation">.</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>context.fn()</code> \u5373\u6267\u884C bar</p><h3 id="\u5B9E\u73B0-apply" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0-apply" aria-hidden="true">#</a> \u5B9E\u73B0 apply</h3><p>apply \u5176\u5B9E\u548C call \u5DEE\u4E0D\u591A\uFF0C\u53EA\u4E0D\u8FC7\u4F20\u9012\u53C2\u6570\u7684\u65B9\u5F0F\u4E0D\u540C</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span>param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">,</span>paramN<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// \u53C2\u6570\u4E3A\u6570\u7EC4</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">,</span>paramN<span class="token punctuation">)</span> <span class="token comment">// \u53C2\u6570\u975E\u6570\u7EC4\uFF0C\u4F20\u5165\u4E00\u4E32\u53C2\u6570</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u54B1\u4EEC\u5BF9\u4E0A\u9762\u7684 call \u7A0D\u5FAE\u4FEE\u6539\u4EE5\u4E0B\u5C31\u662F apply \u4E86</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">johanApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context <span class="token operator">=</span> window<span class="token punctuation">,</span> params <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5224\u65AD\u662F\u51FD\u6570\u624D\u80FD\u8C03\u7528apply\u65B9\u6CD5</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;\u7C7B\u578B\u9519\u8BEF&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u5C06this\u4E5F\u5C31\u662F\u88AB\u8C03\u7528\u7684\u51FD\u6570\uFF0C\u901A\u8FC7\u8D4B\u503C\u7ED9\u4F20\u5165\u7684\u5BF9\u8C61\uFF0C\u6765\u8FBE\u5230\u5C06\u88AB\u8C03\u7528\u7684\u51FD\u6570\u6DFB\u52A0\u5230\u4F20\u5165\u7684\u5BF9\u8C61\u4E0A\u7684\u76EE\u7684</span>
    context<span class="token punctuation">.</span>fun <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// \u7528\u4F20\u5165\u7684\u5BF9\u8C61\u6765\u8C03\u7528\u9700\u8981\u88AB\u8C03\u7528\u7684\u51FD\u6570\uFF0C\u5E76\u4FDD\u7559\u8FD4\u56DE\u7ED3\u679C</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token operator">...</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5220\u9664\u4F20\u5165\u5BF9\u8C61\u4E0A\u88AB\u6DFB\u52A0\u7684\u51FD\u6570\uFF0C\u9632\u6B62\u5185\u5B58\u6CC4\u6F0F</span>
    Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">&#39;fun&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8FD4\u56DE\u7ED3\u679C</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>bind \u7528\u5230\u4E86\u95ED\u5305</p><h2 id="\u53C2\u8003\u8D44\u6599" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u8D44\u6599" aria-hidden="true">#</a> \u53C2\u8003\u8D44\u6599</h2>`,31),k={href:"https://github.com/mqyqingfeng/Blog/issues/11",target:"_blank",rel:"noopener noreferrer"},b=u("JavaScript \u6DF1\u5165\u4E4B call \u548C apply \u7684\u6A21\u62DF\u5B9E\u73B0");function m(d,f){const s=p("ExternalLinkIcon");return t(),e(c,null,[r,n("ul",null,[n("li",null,[n("a",k,[b,o(s)])])])],64)}var y=a(i,[["render",m],["__file","call\u3001apply\u3001bind\u7684\u5E94\u7528.html.vue"]]);export{y as default};
